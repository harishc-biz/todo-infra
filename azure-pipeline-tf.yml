trigger:
- main

pool:
  vmImage: 'ubuntu-latest'

steps:

- task: TerraformInstaller@1
  inputs:
    terraformVersion: 'latest'

- task: TerraformTaskV4@4
  inputs:
    provider: 'azurerm'
    command: 'init'
    workingDirectory: '$(System.DefaultWorkingDirectory)/iaf'
    commandOptions: '-var-file ./environments/dev/terraform.tfvars'
    backendAzureRmUseEnvironmentVariablesForAuthentication: false
    backendServiceArm: 'harish(7988383d-5947-4e42-bede-64c7eb8aa983)'
    backendAzureRmResourceGroupName: 'todo-app'
    backendAzureRmStorageAccountName: 'tododevtf'
    backendAzureRmContainerName: 'tfstate'
    backendAzureRmKey: 'terraform.tfstate'
